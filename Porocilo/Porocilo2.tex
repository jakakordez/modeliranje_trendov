% To je predloga za poročila o domačih nalogah pri predmetih, katerih
% nosilec je Blaž Zupan. Seveda lahko tudi dodaš kakšen nov, zanimiv
% in uporaben element, ki ga v tej predlogi (še) ni. Več o LaTeX-u izveš na
% spletu, na primer na http://tobi.oetiker.ch/lshort/lshort.pdf.
%
% To predlogo lahko spremeniš v PDF dokument s pomočjo programa
% pdflatex, ki je del standardne instalacije LaTeX programov.

\documentclass[a4paper,11pt]{article}
\usepackage{a4wide}
\usepackage{fullpage}
\usepackage[utf8x]{inputenc}
\usepackage[slovene]{babel}
\selectlanguage{slovene}
\usepackage[toc,page]{appendix}
\usepackage[pdftex]{graphicx} % za slike
\usepackage{setspace}
\usepackage{color}
\definecolor{light-gray}{gray}{0.95}
\usepackage{listings} % za vključevanje kode
\usepackage{hyperref}
\usepackage[]{algorithm2e}
\usepackage{program}
\usepackage[table]{xcolor}
\usepackage{makecell}
\usepackage{multirow}
\usepackage{algpseudocode}
\renewcommand{\baselinestretch}{1.2} % za boljšo berljivost večji razmak
\renewcommand{\appendixpagename}{Priloge}

\lstset{ % nastavitve za izpis kode, sem lahko tudi kaj dodaš/spremeniš
language=Python,
basicstyle=\footnotesize,
basicstyle=\ttfamily\footnotesize\setstretch{1},
backgroundcolor=\color{light-gray},
}

\title{Modeliranje časovnih trendov z markovskimi verigami \\ \large  Poročilo izvorne kode (pthreads)}
\author{Jaka Kordež \\ Anže Gregorc}
\date{\today}

\begin{document}

\maketitle

\section{Uvod}

Pri predmetu bomo spoznavali sisteme za vzporedno in porazdeljeno procesiranje. Izbrali smo problem, ki ga bomo v skupinah po dva tekom semestra nadgrajevali s pomočjo različnih pristopov za paralelno programiranje. Tokrat pa je poročilo namenjeno opisu paralelizacije in meritev.

\section{Ideja paralelizacije}

Ker je glavna struktura matrika, je paralelizacijo dokaj lahko implementirati. Dogaja se pri normalizaciji matrike. Vsaka nit opravi delo na svojem kosu podatkov. Ker je matrika implementirana kot ena velika vrsta, vsaka nit dobi nalogo opraviti delo na določenem kosu le te. Z drugimi besedami, zaporedne celice v vrsti sledijo po stolpcu navzdol, torej lahko rečemo, da smo matriko razdelili po stolpcih. Komunikacija med delom niti ni potrebna, le na koncu se morajo počakati, da dokončajo in se nato program začne računati uspešnost napovedi te matrike.

\section{Meritve}
Za vsako velikost problema (število dimenzij in stanj v matriki) se je opravilo 22 meritev. V tabeli~\ref{tab1} so prikazani rezultati, ko je program uporabljal 2 niti za paralelizacijo. V tabeli ~\ref{tab2} je program deloval na osmih, v tabeli ~\ref{tab3} pa na šestnajstih. Skupno se je torej opravilo 1056 meritev.

\begin{table}[htbp]
\caption{Povprečni časi meritev pri paralelizaciji z dvemi nitmi. Stolpci predstavljajo število dimenzij, vrstice pa število stanj. Časovna enota je sekunda.}
\label{tab1}
\begin{center}
\begin{tabular}{p{2cm} p{2cm}   p{1.5cm}|p{1.5cm}|p{1.5cm}|p{1.5cm}|}
& & \multicolumn{4}{ c }{Dimenzije} \\ \cline{3-5}
 && \cellcolor[gray]{0.9} 7 & \cellcolor[gray]{0.9} 6 & \cellcolor[gray]{0.9} 5 & \cellcolor[gray]{0.9} 4 \\ \cline{3-6}
\multirow{4}{*}{Stanja} 
&\cellcolor[gray]{0.9} 20 & 6,13 & 1,43 & 0,99 & 0,88 \\ \cline{2-6}
&\cellcolor[gray]{0.9} 16 & 2,72 & 1,43 & 1 & 0,93 \\ \cline{2-6}
&\cellcolor[gray]{0.9} 12 & 1,55 & 1,09 & 0,96 & 0,88 \\ \cline{2-6}
&\cellcolor[gray]{0.9} 8 & 1,18 & 0,96 & 0.9 & 0,89 \\ \cline{2-6}
\end{tabular}
\end{center}
\end{table}

\begin{table}[htbp]
\caption{Povprečni časi meritev pri paralelizaciji z osmimi nitmi. Stolpci predstavljajo število dimenzij, vrstice pa število stanj. Časovna enota je sekunda.}
\label{tab2}
\begin{center}
\begin{tabular}{p{2cm} p{2cm}   p{1.5cm}|p{1.5cm}|p{1.5cm}|p{1.5cm}|}
& & \multicolumn{4}{ c }{Dimenzije} \\ \cline{3-5}
 && \cellcolor[gray]{0.9} 7 & \cellcolor[gray]{0.9} 6 & \cellcolor[gray]{0.9} 5 & \cellcolor[gray]{0.9} 4 \\ \cline{3-6}
\multirow{4}{*}{Stanja} 
&\cellcolor[gray]{0.9} 20 & 2,81 & 1,24 & 0,98 & 0,91  \\ \cline{2-6}
&\cellcolor[gray]{0.9} 16 & 2,11 & 1,35 & 1,01 & 0,9  \\ \cline{2-6}
&\cellcolor[gray]{0.9} 12 & 1,46 & 1,13 & 0,94 & 0,91  \\ \cline{2-6}
&\cellcolor[gray]{0.9} 8 &  1,2 & 0,99 & 0,91 & 0,86  \\ \cline{2-6}
\end{tabular}
\end{center}
\end{table}

\begin{table}[htbp]
\caption{Povprečni časi meritev pri paralelizaciji s šestnajstimi nitmi. Stolpci predstavljajo število dimenzij, vrstice pa število stanj. Časovna enota je sekunda.}
\label{tab3}
\begin{center}
\begin{tabular}{p{2cm} p{2cm}   p{1.5cm}|p{1.5cm}|p{1.5cm}|p{1.5cm}|}
& & \multicolumn{4}{ c }{Dimenzije} \\ \cline{3-5}
 && \cellcolor[gray]{0.9} 7 & \cellcolor[gray]{0.9} 6 & \cellcolor[gray]{0.9} 5 & \cellcolor[gray]{0.9} 4 \\ \cline{3-6}
\multirow{4}{*}{Stanja} 
&\cellcolor[gray]{0.9} 20 & 2,39 & 1,23 & 0,98 & 0,9  \\ \cline{2-6}
&\cellcolor[gray]{0.9} 16 & 2,01 & 1,38 & 1,02 & 0,94 \\ \cline{2-6}
&\cellcolor[gray]{0.9} 12 & 1,45 & 1,13 & 0,98 & 0,95  \\ \cline{2-6}
&\cellcolor[gray]{0.9} 8  & 0,99 & 1    & 0,91 & 0,88 \\ \cline{2-6}
\end{tabular}
\end{center}
\end{table}



\section{Analiza meritev}

Pohitritev je izračunana na največji matriki iz meritev. Torej vsebuje 20 stanj in 7 dimenzij. V tabeli ~\ref{analiza1} so podani rezultati. Z rezultati sva zadovoljna, saj smo dosegli določeno pohitritev. 

\begin{table}[htbp]
\caption{}
\label{analiza1}
\begin{center}
\begin{tabular}{|p{2cm}| p{2cm} | p{2cm}| p{2cm}| }
 \hline
\cellcolor[gray]{0.9} Število niti &\cellcolor[gray]{0.9}  Povprečni čas [s] & \cellcolor[gray]{0.9}  Pohitritev & \cellcolor[gray]{0.9}  Učinkovitost \\ \hline
1 & 15,06 & 1 \\ \hline
2 & 6,13 & 0,41 \\ \hline
8 & 2,81 & 0,187\\ \hline
16 & 2,39 & 0,159 \\ \hline
\end{tabular}
\end{center}
\end{table}


\end{document}
